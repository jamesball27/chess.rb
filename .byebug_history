exit
c
side_attacks
forward_steps
c
disp piece
c
disp piece
exit
c
pos
c
disp piece
c
board.in_bounds?(pos)
board.in_bounds?
board
pos
forward_steps
c
disp piece
exit
forward_steps
c
disp piece
c
disp piece
piece
c
piece.moves.include?(king)
king
piece.moves
piece
exit
opponent_pieces
piece
grid.flatten.length
grid.flatten
grid
piece.moves
piece
n
opponent_pieces.all? {|p| p.color == opponent_color }
opponent_pieces.count
opponent_pieces
n
opponent_color
n
king
n
color
exit
c
pos
exit
c
moves
c
board[new_pos]
board.in_bounds?(new_pos)
board
moves.last
pos
new_pos
move_deltas
dy
dx
n
s
move_deltas
c
grid[i]
disp i
disp
s
c
n
grid
n
grid
